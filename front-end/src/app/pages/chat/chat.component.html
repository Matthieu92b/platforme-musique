<mat-card style="margin-top: 20px;">
  <mat-card-title>Chat</mat-card-title>
  <div style="padding:8px; background:#fffae6; border:1px solid #ffe58f;">
    CHAT COMPONENT OK — roomId={{ roomId }} — userId={{ userId }}
  </div>
  <mat-card-content>
    <div *ngIf="error" style="color:#d32f2f; margin-bottom: 8px;">
      {{ error }}
    </div>

    <div style="height: 300px; overflow:auto; padding: 8px; border: 1px solid rgba(0,0,0,.12); border-radius: 8px;">
      <div *ngFor="let l of lines; trackBy: trackByIdx" style="margin-bottom: 6px;">
        <b>{{ l.userId }}</b> : {{ l.message }}
        <small style="opacity:.6; margin-left: 6px;">{{ l.ts | date:'HH:mm:ss' }}</small>
      </div>

      <div *ngIf="!lines.length" style="opacity:.7;">
        Aucun message pour l’instant.
      </div>
    </div>
  </mat-card-content>

  <mat-card-actions style="display:flex; gap: 8px; align-items:center;">
    <mat-form-field style="flex:1;">
      <input matInput placeholder="Ton message..." [(ngModel)]="message" (keyup.enter)="send()" />
    </mat-form-field>
    <button mat-raised-button color="primary" (click)="send()">Envoyer</button>
  </mat-card-actions>
</mat-card>
